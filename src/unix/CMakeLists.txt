if (${CMAKE_SYSTEM_NAME} MATCHES "Linux")
    find_package(ALSA)
    if (ALSA_FOUND)
        set(PLAT_SOURCES linux_midi_alsa.c)
    else()
        set(PLAT_SOURCES unix_midi.c)
    endif()
else()
    set(PLAT_SOURCES unix_midi.c)
endif()
add_library(plat STATIC ${PLAT_SOURCES})
add_library(ui STATIC unix.c unix_sdl.c unix_cdrom.c imgui_tables.cpp imgui_widgets.cpp imgui.cpp
                      imgui_sdl.cpp imgui_impl_sdl.cpp imgui_demo.cpp imgui_draw.cpp unix_ui.cpp)
target_compile_definitions(ui PUBLIC _FILE_OFFSET_BITS=64)
target_link_libraries(ui dl)
if (ALSA_FOUND)
    target_link_libraries(plat ALSA::ALSA)
endif()